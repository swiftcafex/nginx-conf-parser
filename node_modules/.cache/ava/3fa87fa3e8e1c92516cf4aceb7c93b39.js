'use strict';

var _ava = require('ava');

var _ava2 = _interopRequireDefault(_ava);

var _confParser = require('../conf-parser');

var _confParser2 = _interopRequireDefault(_confParser);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const fs = require('fs');

const exmaplePath = './test/support/example.conf';
(0, _ava2.default)('parse config file', async t => {
	await function () {
		return new Promise(resolve => {
			_confParser2.default.parseFile(exmaplePath, () => {
				resolve();
			});
		});
	};
	t.pass();
});

(0, _ava2.default)('extract lines', async t => {
	const inStream = fs.createReadStream(exmaplePath);

	await function () {
		return new Promise(resolve => {
			_confParser2.default.extractLines(inStream, lines => {
				t.is(lines.length, 70); // The number of lines must be 70, same as the oroginal file /test/support/example.conf

				// Comments must be stripped after extract.
				for (const line of lines) {
					t.is(line.indexOf('#'), -1);
				}

				resolve();
			});
		});
	}();
	t.pass();
});
//# sourceMappingURL=../node_modules/.cache/ava/3fa87fa3e8e1c92516cf4aceb7c93b39.js.map